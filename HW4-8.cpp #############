/*
    จงแปลงเลขฐาน 16 ที่รับมาจากผู้ใช้ให้กลายเป็นเลขฐาน 2
    
    Test case:
        User input :
            FB
    Output:
        11111011

    Test case:
        User input :
            19
    Output:
        11001
*/

#include <stdio.h>
#include <stdlib.h> //จัดการกับหน่วยความจำ การคำนวณ และการจัดการกับกระบวนการต่าง ๆ ภายในโปรแกรม

// ฟังก์ชันในการแปลงเลขฐาน 10 เป็นเลขฐาน 2
void printBinary(unsigned int num) {
    if (num == 0) {
        printf("0");
        return;
    }

    // ใช้การแสดงผลของบิตจากบิตที่สูงสุดไปหาบิตที่ต่ำสุด
    unsigned int mask = 1 << (sizeof(num) * 8 - 1); // สร้างมาสก์ที่มีบิตสูงสุดเป็น 1
    int leadingZeroes = 1; // ใช้เพื่อข้ามศูนย์ที่นำหน้า

    // ลูปเพื่อลดมาสก์ทีละบิต
    for ( int i = 0 ; i < sizeof(num) * 8 ; i++ ) {
        if (num & mask) {
            printf("1");
            leadingZeroes = 0; // พบ 1 จึงเริ่มแสดงผล
        } else if (!leadingZeroes) {
            printf("0");
        }
        mask >>= 1; // เลื่อนมาสก์ไปทางขวา
    }
}

int main() {
    char hexString[20];

    // รับค่าเลขฐาน 16 จากผู้ใช้
    printf("Enter a hexadecimal number: ");
    scanf("%s", hexString);

    // แปลงเลขฐาน 16 เป็นเลขฐาน 10
    unsigned int decimalValue = (unsigned int)strtol(hexString, NULL, 16);

    // แสดงผลลัพธ์เป็นเลขฐาน 2
    printf("Binary representation: ");
    printBinary(decimalValue);
    printf("\n");

    return 0;
}
